<%- include('../partials/header.ejs')%>
  
<main>
  <h1 class="pagetitle">Event Page</h1>
  <div class="content-box2">
    <h1><%= event.title %></h1>

    <img src="<%= event.image %>" alt="<%= event.title %>" style="max-width: 100%; border-radius: 8px; margin-bottom: 20px;">

    <p><strong>Category:</strong> <%= event.category %></p>
    <p><strong>Start:</strong> <%= new Date(event.startDateTime).toLocaleString() %></p>
    <p><strong>End:</strong> <%= new Date(event.endDateTime).toLocaleString() %></p>
    <p><strong>Location:</strong> <%= event.location %></p>
    <p><strong>Details:</strong> <%= event.details %></p>

    <p>
      <strong>Created At:</strong> <%= new Date(event.createdAt).toLocaleString() %>
      <strong> By: </strong>
      <% if (event.host) { %>
        <%= event.host.firstName %> <%= event.host.lastName %>
      <% } else { %>
        <em>Unknown</em>
      <% } %>
    </p>

    <% if (user && event.host && user.toString() === event.host._id.toString()) { %>
      <div class="event-action-buttons">
        <a href="/events/<%= event._id %>/edit" class="edit-btn">Edit</a>
        <form action="/events/<%= event._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this event?');">
          <button type="submit" class="delete-btn">Delete</button>
        </form>
      </div>
    <% } %>

  </div>
</main>
    
<%- include('../partials/footer.ejs')%>